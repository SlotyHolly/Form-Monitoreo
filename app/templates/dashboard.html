{% extends "base.html" %}

{% block content %}
<body>
    <h1>Dashboard de Administraci칩n</h1>

    <!-- Crear Nuevo Usuario -->
    <h2>Crear Nuevo Usuario</h2>
    <form method="POST">
        {{ create_user_form.hidden_tag() }}
        <label>{{ create_user_form.username.label }}</label>
        {{ create_user_form.username }}
        <br>

        <label>{{ create_user_form.password.label }}</label>
        {{ create_user_form.password }}
        <br>

        <label>{{ create_user_form.confirm_password.label }}</label>
        {{ create_user_form.confirm_password }}
        <br>

        <label>{{ create_user_form.role.label }}</label>
        {{ create_user_form.role }}
        <br>

        {{ create_user_form.submit }}
    </form>

    <!-- Lista de Usuarios con opciones para Cambiar Contrase침a y Eliminar -->
    <h2>Usuarios Registrados</h2>
    <ul>
        {% for user in users %}
        <li>
            {{ user.username }} - Rol: {{ user.role }}

            <!-- Formulario para Cambiar Contrase침a -->
            <form method="POST" action="{{ url_for('admin.change_password', user_id=user.id) }}">
                {{ change_password_form.hidden_tag() }}
                <label>{{ change_password_form.new_password.label }}</label>
                {{ change_password_form.new_password }}
                {{ change_password_form.submit }}
            </form>

            <!-- Bot칩n para Eliminar Usuario -->
            <form method="POST" action="{{ url_for('admin.delete_user', user_id=user.id) }}">
                {{ delete_user_form.hidden_tag() }}
                {{ delete_user_form.submit }}
            </form>
        </li>
        {% endfor %}
    </ul>

</body>
</html>
{% endblock %}
